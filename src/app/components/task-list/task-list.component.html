<div style="display: flex; flex-direction: column; gap: 20px">
  <div style="display: flex; justify-content: end">
    <p-button (onClick)="dialogVisible = true" label="Add new task" />
  </div>
  <p-table [value]="tasks" styleClass="p-datatable-striped">
    <ng-template pTemplate="header">
      <tr>
        <th *ngFor="let column of columns">
          {{ column.header }}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-task>
      <tr>
        <td>{{ task.id }}</td>
        <td>{{ task.userId }}</td>
        <td>
          <a [routerLink]="['/tasks', task.id]">
            {{ task.title }}
          </a>
        </td>
        <td>{{ task.body }}</td>
        <td>
          <div style="display: flex; gap: 20px">
            <div
              aria-hidden="true"
              class="pi pi-pencil"
              style="cursor: pointer"
              (click)="openDialog(task)"
            ></div>
            <div
              aria-hidden="true"
              style="cursor: pointer"
              class="pi pi-trash"
              (click)="deleteTask(task.id)"
            ></div>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
<p-dialog
  *ngIf="dialogVisible"
  (onHide)="hideDialog()"
  [draggable]="false"
  [header]="editedTask ? 'Edit a task' : 'Create a new task'"
  [modal]="true"
  [(visible)]="dialogVisible"
>
  <app-task-form
    (hideDialog)="hideDialog()"
    (addTask)="addTask($event)"
    (updateTask)="updateTask($event)"
    [id]="editedTask?.id || tasks.length + 1"
    [editedTask]="editedTask"
  ></app-task-form>
</p-dialog>
